{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///Users/prashanthgundala/Desktop/finance-dashboard/src/lib/plaid.ts"],"sourcesContent":["import { Configuration, PlaidApi, PlaidEnvironments } from \"plaid\";\n\nconst configuration = new Configuration({\n    basePath: PlaidEnvironments.sandbox,\n    baseOptions: {\n        headers: {\n            'PLAID-CLIENT-ID': process.env.PLAID_CLIENT_ID,\n            'PLAID-SECRET': process.env.PLAID_SECRET,\n        },\n    },\n});\n\nexport const plaidClient = new PlaidApi(configuration);"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,gBAAgB,IAAI,yJAAa,CAAC;IACpC,UAAU,6JAAiB,CAAC,OAAO;IACnC,aAAa;QACT,SAAS;YACL,mBAAmB,QAAQ,GAAG,CAAC,eAAe;YAC9C,gBAAgB,QAAQ,GAAG,CAAC,YAAY;QAC5C;IACJ;AACJ;AAEO,MAAM,cAAc,IAAI,oJAAQ,CAAC"}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file:///Users/prashanthgundala/Desktop/finance-dashboard/src/lib/db.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nconst globalForPrisma = globalThis as unknown as {\n    prisma: PrismaClient | undefined;\n};\n\nexport const db = globalForPrisma.prisma ?? new PrismaClient();\n\nif(process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = db;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,KAAK,gBAAgB,MAAM,IAAI,IAAI,sMAAY;AAE5D,wCAA0C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 163, "column": 0}, "map": {"version":3,"sources":["file:///Users/prashanthgundala/Desktop/finance-dashboard/src/app/api/plaid/transactions/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { plaidClient } from \"@/lib/plaid\";\nimport { db } from \"@/lib/db\";\n\n\nexport async function GET() {\n    try {\n        const userId = \"test_user_123\";\n\n        const account = await db.account.findFirst({\n            where: { userId: userId },\n        });\n\n        if(!account || !account.plaidAccessToken) {\n            return NextResponse.json({error: \"No bank account found\"}, {status: 400});\n        }\n\n        const response = await plaidClient.transactionsSync({\n            access_token: account.plaidAccessToken,\n        });\n\n        const plaidTransactions = response.data.added;\n\n        for(const t of plaidTransactions) {\n            if(t.amount > 0) {\n                await db.transaction.upsert({\n                    where: { plaidTransactionId: t.transaction_id },\n                    update: {},\n                    create: {\n                        id: crypto.randomUUID(),\n                        accountId: account.id,\n                        userId: userId,\n                        plaidTransactionId: t.transaction_id,\n                        amount: t.amount,\n                        date: new Date(t.date),\n                        name: t.name,\n                        category: t.category ? t.category[0] : \"Uncategorized\",\n                        status: \"POSTED\"\n                    }\n                });\n            }\n        }\n\n        const savedTransactions = await db.transaction.findMany({\n            where: { userId: userId },\n            orderBy: { date: \"desc\" }\n        });\n        \n        return NextResponse.json(savedTransactions)\n    } catch(error) {\n        console.error(\"Error while fetching transactions:\", error);\n        return NextResponse.json({ error: \"Failed to fetch transactions\" }, { status: 500 });\n    }\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAGO,eAAe;IAClB,IAAI;QACA,MAAM,SAAS;QAEf,MAAM,UAAU,MAAM,wHAAE,CAAC,OAAO,CAAC,SAAS,CAAC;YACvC,OAAO;gBAAE,QAAQ;YAAO;QAC5B;QAEA,IAAG,CAAC,WAAW,CAAC,QAAQ,gBAAgB,EAAE;YACtC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAC,OAAO;YAAuB,GAAG;gBAAC,QAAQ;YAAG;QAC3E;QAEA,MAAM,WAAW,MAAM,oIAAW,CAAC,gBAAgB,CAAC;YAChD,cAAc,QAAQ,gBAAgB;QAC1C;QAEA,MAAM,oBAAoB,SAAS,IAAI,CAAC,KAAK;QAE7C,KAAI,MAAM,KAAK,kBAAmB;YAC9B,IAAG,EAAE,MAAM,GAAG,GAAG;gBACb,MAAM,wHAAE,CAAC,WAAW,CAAC,MAAM,CAAC;oBACxB,OAAO;wBAAE,oBAAoB,EAAE,cAAc;oBAAC;oBAC9C,QAAQ,CAAC;oBACT,QAAQ;wBACJ,IAAI,OAAO,UAAU;wBACrB,WAAW,QAAQ,EAAE;wBACrB,QAAQ;wBACR,oBAAoB,EAAE,cAAc;wBACpC,QAAQ,EAAE,MAAM;wBAChB,MAAM,IAAI,KAAK,EAAE,IAAI;wBACrB,MAAM,EAAE,IAAI;wBACZ,UAAU,EAAE,QAAQ,GAAG,EAAE,QAAQ,CAAC,EAAE,GAAG;wBACvC,QAAQ;oBACZ;gBACJ;YACJ;QACJ;QAEA,MAAM,oBAAoB,MAAM,wHAAE,CAAC,WAAW,CAAC,QAAQ,CAAC;YACpD,OAAO;gBAAE,QAAQ;YAAO;YACxB,SAAS;gBAAE,MAAM;YAAO;QAC5B;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAM,OAAO;QACX,QAAQ,KAAK,CAAC,sCAAsC;QACpD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA+B,GAAG;YAAE,QAAQ;QAAI;IACtF;AACJ"}}]
}